# 设计模式

## 资源链接

- [设计模式](https://refactoringguru.cn/design-patterns#intro-patterns)
- [设计模式原则总结](https://zhuanlan.zhihu.com/p/457009285)

## 什么是设计模式?

### 面向对象是什么？

- 面向对象是 对 人类 基于自然语言的知识组织方式 的 简化模拟
- 面向对象适合编写应用程序，不适合编写系统程序
  - 面向对象：处理很多人机交互操作，较少需要使用数学符号和公式

#### 面向对象与面向过程

- 面向过程
  - 将解决问题的过程，拆成一个个方法，通过指定顺序调用方法的来解决问题
  - eg：
    - 执行加洗衣粉方法
    - 执行加水方法；
    - 执行洗衣服方法；
    - 执行清洗方法；
    - 执行烘干方法；
- 面向对象
  - 先抽象出对象（属性，方法），用对象执行方法的方式解决问题
  - eg:
    - 定义：洗衣机（对象）、人（对象） 【属性/方法】
    - 人.加洗衣粉
    - 人.加水
    - 洗衣机.洗衣服
    - 洗衣机.清洗
    - 洗衣机.烘干

### 设计模式由来

- 1994 年，四位作者，出版了 《设计模式： 可复用面向对象软件的基础》
- 该书提供了 23 个模式来解决面向对象程序设计中的各种问题，
- 人们将其简称为 “四人组 （Gang of Four， GoF） 的书”

### 设计模式的简单介绍

- 模式是 面向对象设计中常见问题的 典型解决方案
- 设计模式是针对软件设计中常见问题的工具箱， 其中的工具就是各种经过实践验证的解决方案
- 很难直接在自己的程序中套用某个设计模式
- 不是特定的代码，而是一种通用性概念（有点像道家哲学，非常虚）
- 模式与算法
  - 已知特定问题的典型解决方案
  - 模式
    - 解决方案的更高层次描述
    - 模式更像是蓝图：你可以看到最终的结果和模式的功能， 但需要自己确定实现步骤
  - 算法（实实在在代码）
    - 明确定义达成特定目标所需的一系列步骤，

### 解决了什么问题？

- 增强可阅读性，代码更加有结构
- 增强可扩展性： 能够 更加容易的 面对需求 的变更
- 增强可维护性：避免代码出BUG，即使出现BUG时，更容易解决
- 增强健壮性：代码 更加稳定，可靠，有保障

### 模式包含哪些内容？

- 意图：描述问题，提出解决方案
- 动机：解释问题，如何提供解决方案
- 结构：组成部分以及之间的关系
- 实现：UML，代码实现

## 设计原则

- 单一职责
  - 一个类只负责完成一个职责或者功能
- 开闭 OCP
  - 对扩展开放、对修改关闭
- 里式替换 LSP
  - 子类对象能够替换父类对象出现的任何地方，并且保证原来程序的逻辑行为不变及正确性不被破坏
- 接口隔离 ISP
  - 不要让接口的实现类和调用者，依赖不需要的接口函数
- 依赖反转 DIP
  - 高层模块不要依赖低层模块,(调用者:高层，被调用者:低层)
  - 控制反转（IOC）
    - “控制”指的是对程序执行流程的控制
    - “反转”是指 通过框架来控制
  - 依赖注入（DI）
    - 不通过 new() 的方式在类内部创建依赖类对象，在外部创建对象，通过参数传递
- 迪米特 LOD：Law of Demeter
  - 最小知识原则(The Least Knowledge)
  - 每个模块只应该了解那些与它关系密切的模块的有限知识
- KISS： Keep It Simple and Stupid
  - 尽量保持简单
- DRY：Don’t Repeat Yourself
  - 不要重复造轮子
- 高内聚、松耦合
  - 高内聚：相近的功能应该放到同一个类中
  - 松耦合：类与类之间的依赖关系："简单"/"清晰"

## 23种模式- GOF模式

### 创建：原 生抽 工单

- 原型：复制一个完全相同的对象（ 无需关注类的依赖）。
- 生成器：分步骤创建复杂对象（相同的创建代码生成不同类型或形式的对象）
- 抽象工厂：创建一系列相关的对象， 而无需指定其具体类。
- 工厂：允许子类决定实例化对象的类型
- 单例：保证一个类只有一个实例， 并提供一个访问该实例的全局节点

### 结构：享 组外桥 代 装适

- 享元：共享多个对象所共有的相同状态，有限的内存容量中载入更多对象（大量对象共享内存，减少内存占用）
- 组合：它将对象组合成 树状结构， 并且能像使用独立对象一样使用它们（大量对象简单化，简化数量复杂度）
- 外观：复杂类提供一个简单的接口（用一个对象来代表整个子系统，简化逻辑复杂度）
- 桥接：将一系列紧密相关的类拆分为 抽象，实现 两个独立的层次结构（按维度分层，简化逻辑复杂度）
- 代理：代理控制着对于原对象的访问， 并允许在将请求提交给对象前后进行一些处理（功能拆分）
- 装饰：将对象 放入包含行为的特殊 封装对象 中来为原对象 绑定新的行为。（运行时为对象新增额外的行为，功能增强）
- 适配：接口不兼容的对象能够相互合作（扩展与兼容 其他对象）

### 行为：访 观命状 责备 模中迭策

- 访问
- 观察
- 命令
- 状态
- 责任
- 备忘录
- 模版
- 中介
- 迭代
- 策略
